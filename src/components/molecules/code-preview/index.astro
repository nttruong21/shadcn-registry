---
import { readFileSync } from 'node:fs'
import { Code } from '@astrojs/starlight/components'

import { CodePreviewModule } from './_module'

// Props
interface Props {
  path: string
  className?: string
}
const { path, className } = Astro.props

// Extract file content
const [type, name, example] = path.split('/')
const componentFileContent = readFileSync(`src/registry/new-york/${type}/${name}/examples/${example}.tsx`, 'utf-8')
---

<CodePreviewModule client:load path={path} className={className}>
  <Code code={componentFileContent} lang='tsx' />
</CodePreviewModule>
