{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "theme-toggle-button",
  "type": "registry:component",
  "title": "Theme Toggle Button",
  "description": "A button to toggle the theme.",
  "dependencies": [
    "lucide-react",
    "zod",
    "@radix-ui/react-slot",
    "class-variance-authority"
  ],
  "registryDependencies": [
    "https://ntt-shadcn-registry.vercel.app/r/button.json",
    "https://ntt-shadcn-registry.vercel.app/r/spinner.json"
  ],
  "files": [
    {
      "path": "src/registry/new-york/molecules/theme-toggle-button/components/theme-toggle-button.tsx",
      "content": "import { Moon, Sun } from 'lucide-react'\nimport React from 'react'\nimport z from 'zod'\nimport { Button, type ButtonProps } from '@/components/ui/button'\nimport { cn } from '@/utils/ui'\n\n// Theme toggle button\nconst themeSchema = z.object({\n  theme: z.union([z.literal('light'), z.literal('dark')])\n})\n\ntype AnimationVariant = 'circle' | 'circle-blur' | 'gif' | 'polygon'\n\ntype StartPosition = 'center' | 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'\n\nexport type ThemeToggleButtonProps = Omit<ButtonProps, 'variant' | 'onClick'> & {\n  themeLocalStorageKey?: string\n  showLabel?: boolean\n  variant?: AnimationVariant\n  startPosition?: StartPosition\n  url?: string // For gif variant\n}\n\nexport const ThemeToggleButton = ({\n  themeLocalStorageKey = 'theme',\n  showLabel = false,\n  variant = 'circle',\n  startPosition = 'center',\n  url,\n  className,\n  ...props\n}: ThemeToggleButtonProps) => {\n  // States\n  const [theme, setTheme] = React.useState<z.output<typeof themeSchema>['theme']>()\n\n  // Methods\n  const toggleTheme = () => {\n    // Update theme\n    document.startViewTransition(() => {\n      const newTheme = theme === 'light' ? 'dark' : 'light'\n      const isDark = newTheme === 'dark'\n\n      setTheme(newTheme)\n      document.documentElement.classList[isDark ? 'add' : 'remove']('dark')\n      document.documentElement.style.colorScheme = isDark ? 'dark' : 'light'\n      document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light')\n    })\n\n    // Inject animation styles for this specific transition\n    const styleId = `theme-transition-${Date.now()}`\n    const style = document.createElement('style')\n    style.id = styleId\n\n    // Generate animation CSS based on variant\n    let css = ''\n    const positions = {\n      center: 'center',\n      'top-left': 'top left',\n      'top-right': 'top right',\n      'bottom-left': 'bottom left',\n      'bottom-right': 'bottom right'\n    }\n\n    if (variant === 'circle') {\n      const cx = startPosition === 'center' ? '50' : startPosition.includes('left') ? '0' : '100'\n      const cy = startPosition === 'center' ? '50' : startPosition.includes('top') ? '0' : '100'\n      css = `\n        @supports (view-transition-name: root) {\n          ::view-transition-old(root) { \n            animation: none;\n          }\n          ::view-transition-new(root) {\n            animation: circle-expand 0.4s ease-out;\n            transform-origin: ${positions[startPosition]};\n          }\n          @keyframes circle-expand {\n            from {\n              clip-path: circle(0% at ${cx}% ${cy}%);\n            }\n            to {\n              clip-path: circle(150% at ${cx}% ${cy}%);\n            }\n          }\n        }\n      `\n    } else if (variant === 'circle-blur') {\n      const cx = startPosition === 'center' ? '50' : startPosition.includes('left') ? '0' : '100'\n      const cy = startPosition === 'center' ? '50' : startPosition.includes('top') ? '0' : '100'\n      css = `\n        @supports (view-transition-name: root) {\n          ::view-transition-old(root) { \n            animation: none;\n          }\n          ::view-transition-new(root) {\n            animation: circle-blur-expand 0.5s ease-out;\n            transform-origin: ${positions[startPosition]};\n            filter: blur(0);\n          }\n          @keyframes circle-blur-expand {\n            from {\n              clip-path: circle(0% at ${cx}% ${cy}%);\n              filter: blur(4px);\n            }\n            to {\n              clip-path: circle(150% at ${cx}% ${cy}%);\n              filter: blur(0);\n            }\n          }\n        }\n      `\n    } else if (variant === 'gif' && url) {\n      css = `\n        @supports (view-transition-name: root) {\n          ::view-transition-old(root) {\n            animation: fade-out 0.4s ease-out;\n          }\n          ::view-transition-new(root) {\n            animation: gif-reveal 2.5s cubic-bezier(0.4, 0, 0.2, 1);\n            mask-image: url('${url}');\n            mask-size: 0%;\n            mask-repeat: no-repeat;\n            mask-position: center;\n          }\n          @keyframes fade-out {\n            to {\n              opacity: 0;\n            }\n          }\n          @keyframes gif-reveal {\n            0% {\n              mask-size: 0%;\n            }\n            20% {\n              mask-size: 35%;\n            }\n            60% {\n              mask-size: 35%;\n            }\n            100% {\n              mask-size: 300%;\n            }\n          }\n        }\n      `\n    } else if (variant === 'polygon') {\n      css = `\n        @supports (view-transition-name: root) {\n          ::view-transition-old(root) {\n            animation: none;\n          }\n          ::view-transition-new(root) {\n            animation: ${theme === 'light' ? 'wipe-in-dark' : 'wipe-in-light'} 0.4s ease-out;\n          }\n          @keyframes wipe-in-dark {\n            from {\n              clip-path: polygon(0 0, 0 0, 0 100%, 0 100%);\n            }\n            to {\n              clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);\n            }\n          }\n          @keyframes wipe-in-light {\n            from {\n              clip-path: polygon(100% 0, 100% 0, 100% 100%, 100% 100%);\n            }\n            to {\n              clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);\n            }\n          }\n        }\n      `\n    }\n\n    if (css) {\n      style.textContent = css\n      document.head.appendChild(style)\n\n      // Clean up animation styles after transition\n      const timer = setTimeout(() => {\n        const styleEl = document.getElementById(styleId)\n        if (styleEl) {\n          styleEl.remove()\n        }\n        clearTimeout(timer)\n      }, 3000)\n    }\n  }\n\n  return (\n    <Button\n      ref={() => {\n        const themeReference = localStorage.getItem(themeLocalStorageKey)\n        const { success, data } = themeSchema.safeParse({\n          theme: themeReference\n        })\n\n        if (success) {\n          return setTheme(data.theme)\n        }\n\n        setTheme(window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light')\n      }}\n      variant='ghost'\n      size={showLabel ? 'default' : 'icon'}\n      onClick={toggleTheme}\n      className={cn('relative overflow-hidden transition-all', className)}\n      aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} theme`}\n      isLoading={!theme}\n      {...props}\n    >\n      {theme ? theme === 'light' ? <Moon /> : <Sun /> : null}\n      {showLabel && <span>{theme === 'light' ? 'Light' : 'Dark'}</span>}\n    </Button>\n  )\n}\n",
      "type": "registry:ui",
      "target": "src/components/molecules/theme-toggle-button/index.tsx"
    },
    {
      "path": "src/registry/new-york/molecules/theme-toggle-button/components/lib.ts",
      "content": "// [U] Observe theme (only use this util on client)\nexport const observeTheme = (key = 'theme') => {\n  const getTheme = () => {\n    const themeReference = localStorage.getItem(key)\n    return themeReference ?? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light')\n  }\n\n  const isDark = getTheme() === 'dark'\n  document.documentElement.classList[isDark ? 'add' : 'remove']('dark')\n  document.documentElement.style.colorScheme = isDark ? 'dark' : 'light'\n  document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light')\n\n  const observer = new MutationObserver(() => {\n    const isDark =\n      document.documentElement.classList.contains('dark') ||\n      document.documentElement.getAttribute('data-theme') === 'dark'\n    localStorage.setItem(key, isDark ? 'dark' : 'light')\n  })\n\n  observer.observe(document.documentElement, {\n    attributes: true,\n    attributeFilter: ['class', 'data-theme']\n  })\n\n  return observer\n}\n",
      "type": "registry:file",
      "target": "src/components/molecules/theme-toggle-button/lib.ts"
    },
    {
      "path": "src/registry/new-york/molecules/theme-toggle-button/components/index.ts",
      "content": "export * from './lib'\nexport * from './theme-toggle-button'\n",
      "type": "registry:file",
      "target": "src/components/molecules/theme-toggle-button/index.ts"
    }
  ]
}