{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "combobox",
  "type": "registry:ui",
  "title": "Combobox",
  "description": "Autocomplete input and command palette with a list of suggestions.",
  "dependencies": [
    "lucide-react",
    "cmdk",
    "@radix-ui/react-dialog",
    "@radix-ui/react-popover"
  ],
  "registryDependencies": [
    "https://ntt-shadcn-registry.vercel.app/r/button.json",
    "https://ntt-shadcn-registry.vercel.app/r/command.json",
    "https://ntt-shadcn-registry.vercel.app/r/popover.json",
    "https://ntt-shadcn-registry.vercel.app/r/spinner.json"
  ],
  "files": [
    {
      "path": "src/registry/new-york/ui/combobox/components/combobox.tsx",
      "content": "import { Check, ChevronDownIcon, X } from 'lucide-react'\nimport * as React from 'react'\nimport { Button, type ButtonProps } from '@/components/ui/button'\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  type CommandInputProps,\n  CommandItem,\n  type CommandItemProps,\n  CommandList,\n  type CommandListProps,\n  type CommandProps\n} from '@/components/ui/command'\nimport {\n  Popover,\n  PopoverContent,\n  type PopoverContentProps,\n  type PopoverProps,\n  PopoverTrigger,\n  type PopoverTriggerProps\n} from '@/components/ui/popover'\nimport type { Option } from '@/types/base'\nimport { cn } from '@/utils/ui'\n\n// Combobox\nexport interface ComboboxProps {\n  value: Option['value'] | null | undefined\n  options: Option[]\n  isValueCanBeEmptyString?: boolean\n  isCanRemoveValue?: boolean\n  placeholder?: string\n  popoverProps?: PopoverProps\n  popoverTriggerProps?: PopoverTriggerProps\n  buttonTriggerProps?: ButtonProps\n  popoverContentProps?: PopoverContentProps\n  commandProps?: CommandProps\n  commandInputProps?: CommandInputProps\n  commandListProps?: CommandListProps\n  commandItemProps?: Omit<CommandItemProps, 'children'> & {\n    children: (option: Option) => React.ReactNode | React.ReactNode\n  }\n  commandItemPrefix?: (option: Option) => React.ReactNode\n  commandGroupSlot?: React.ReactNode\n  onValueChange: (value: ComboboxProps['value']) => void\n}\n\nexport const useLabel = (args: Pick<ComboboxProps, 'value' | 'options' | 'isValueCanBeEmptyString'>) => {\n  // Args\n  const { value, options, isValueCanBeEmptyString } = args\n\n  // States\n  const [label, setLabel] = React.useState<string>()\n\n  // Effects\n  // Reset label\n  React.useEffect(() => {\n    if (value == null || (value === '' && !isValueCanBeEmptyString)) {\n      return setLabel(undefined)\n    }\n\n    const selectedOption = options.find((option) => option.value === value)\n\n    if (selectedOption) {\n      setLabel(selectedOption.label)\n    }\n  }, [value, options, isValueCanBeEmptyString])\n\n  return { label }\n}\n\nexport const Combobox = ({\n  value,\n  options,\n  isValueCanBeEmptyString = false,\n  isCanRemoveValue = true,\n  placeholder,\n  popoverProps,\n  popoverTriggerProps,\n  buttonTriggerProps,\n  popoverContentProps,\n  commandProps,\n  commandInputProps,\n  commandListProps,\n  commandItemProps,\n  commandItemPrefix,\n  commandGroupSlot,\n  onValueChange\n}: ComboboxProps) => {\n  // Hooks\n  const { label } = useLabel({\n    value,\n    options,\n    isValueCanBeEmptyString\n  })\n\n  // States\n  const [isOpenPopover, setIsOpenPopover] = React.useState(false)\n\n  // Memos\n  const isEmpty = React.useMemo(() => {\n    return value == null || (value === '' && !isValueCanBeEmptyString)\n  }, [value, isValueCanBeEmptyString])\n\n  return (\n    <Popover {...popoverProps} open={isOpenPopover} modal onOpenChange={setIsOpenPopover}>\n      <PopoverTrigger {...popoverTriggerProps} asChild={popoverTriggerProps?.asChild ?? true}>\n        {popoverTriggerProps?.children ?? (\n          <Button\n            variant='outline'\n            role='combobox'\n            data-empty={isEmpty}\n            aria-expanded={isOpenPopover}\n            {...buttonTriggerProps}\n            className={cn(\n              'w-full justify-start font-normal data-[empty=true]:text-muted-foreground [&_svg]:pointer-events-auto',\n              buttonTriggerProps?.className\n            )}\n          >\n            {buttonTriggerProps?.children ?? (\n              <React.Fragment>\n                <span className='line-clamp-1 text-ellipsis'> {label ?? placeholder}</span>\n\n                {isCanRemoveValue && !isEmpty ? (\n                  <X\n                    className='ml-auto size-4 shrink-0 text-muted-foreground transition-transform hover:scale-125'\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      onValueChange(null)\n                    }}\n                  />\n                ) : (\n                  <ChevronDownIcon className='ml-auto size-4 shrink-0 text-muted-foreground' />\n                )}\n              </React.Fragment>\n            )}\n          </Button>\n        )}\n      </PopoverTrigger>\n\n      <PopoverContent\n        {...popoverContentProps}\n        className={cn('min-w-(--radix-popover-trigger-width) p-0', popoverContentProps?.className)}\n      >\n        <Command {...commandProps}>\n          <CommandInput placeholder='Search' {...commandInputProps} />\n          <CommandList {...commandListProps}>\n            <CommandEmpty>No option found.</CommandEmpty>\n            <CommandGroup>\n              {options.map((option) => {\n                const commandItemChildren = commandItemProps?.children ? (\n                  commandItemProps.children(option)\n                ) : (\n                  <span>{option.label}</span>\n                )\n\n                if (!commandItemChildren) {\n                  return null\n                }\n\n                return (\n                  <div\n                    key={option.value}\n                    className={cn('flex items-center gap-1', {\n                      'pl-1': Boolean(commandItemPrefix)\n                    })}\n                  >\n                    {commandItemPrefix?.(option)}\n\n                    <CommandItem\n                      value={option.label}\n                      className='grow'\n                      onSelect={() => {\n                        onValueChange(option.value)\n                        setIsOpenPopover(false)\n                      }}\n                      {...commandItemProps}\n                    >\n                      {commandItemChildren}\n                      <Check className={cn('ml-auto size-4', option.value === value ? 'opacity-100' : 'opacity-0')} />\n                    </CommandItem>\n                  </div>\n                )\n              })}\n\n              {commandGroupSlot && commandGroupSlot}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  )\n}\n",
      "type": "registry:ui",
      "target": "src/components/ui/combobox.tsx"
    },
    {
      "path": "src/types/base.ts",
      "content": "export interface Option {\n  value: string\n  label: string\n}\n",
      "type": "registry:file",
      "target": "src/types/base.ts"
    }
  ]
}