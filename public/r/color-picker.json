{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "color-picker",
  "type": "registry:component",
  "title": "Color Picker",
  "description": "A component to pick the color.",
  "dependencies": [
    "@radix-ui/react-slider",
    "color",
    "lucide-react",
    "class-variance-authority",
    "@radix-ui/react-select"
  ],
  "registryDependencies": [
    "https://ntt-shadcn-registry.vercel.app/r/button.json",
    "https://ntt-shadcn-registry.vercel.app/r/input.json",
    "https://ntt-shadcn-registry.vercel.app/r/select.json",
    "https://ntt-shadcn-registry.vercel.app/r/spinner.json"
  ],
  "files": [
    {
      "path": "src/registry/new-york/molecules/color-picker/components/color-picker.tsx",
      "content": "import * as Slider from '@radix-ui/react-slider'\nimport Color, { type ColorInstance } from 'color'\nimport { PipetteIcon } from 'lucide-react'\nimport React from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { cn } from '@/utils/ui'\n\nconst formats = ['hex', 'rgb', 'hsl'] as const\ntype Format = (typeof formats)[number]\n\n// Color picker\ninterface ColorPickerContextValue {\n  hue: number\n  saturation: number\n  lightness: number\n  alpha: number\n  format: Format\n  setHue: (hue: number) => void\n  setSaturation: (saturation: number) => void\n  setLightness: (lightness: number) => void\n  setAlpha: (alpha: number) => void\n  setFormat: (mode: Format) => void\n}\n\nconst ColorPickerContext = React.createContext<ColorPickerContextValue | null>(null)\n\nexport const useColorPicker = () => {\n  const context = React.useContext(ColorPickerContext)\n  if (!context) {\n    throw new Error('useColorPicker must be used within a ColorPickerProvider')\n  }\n  return context\n}\n\nexport type ColorPickerProps = React.HTMLAttributes<HTMLDivElement> & {\n  value?: Parameters<typeof Color>[0]\n  defaultValue?: Parameters<typeof Color>[0]\n  onValueChange?: (value: ColorInstance) => void\n}\n\nexport const ColorPicker = ({\n  value,\n  defaultValue = '#FFFFFF',\n  onValueChange,\n  className,\n  ...props\n}: ColorPickerProps) => {\n  const selectedColor = Color(value)\n  const defaultColor = Color(defaultValue)\n\n  // States\n  const [hue, setHue] = React.useState(selectedColor.hue() || defaultColor.hue() || 0)\n  const [saturation, setSaturation] = React.useState(selectedColor.saturationl() || defaultColor.saturationl() || 100)\n  const [lightness, setLightness] = React.useState(selectedColor.lightness() || defaultColor.lightness() || 50)\n  const [alpha, setAlpha] = React.useState(selectedColor.alpha() * 100 || defaultColor.alpha() * 100)\n  const [format, setFormat] = React.useState<Format>('hex')\n\n  // Effects\n  // Update color when controlled value changes\n  React.useEffect(() => {\n    if (value) {\n      const color = Color.rgb(value).rgb().object()\n      setHue(color.r)\n      setSaturation(color.g)\n      setLightness(color.b)\n      setAlpha(color.a)\n    }\n  }, [value])\n\n  // Notify parent of changes\n  React.useEffect(() => {\n    if (onValueChange) {\n      const color = Color.hsl(hue, saturation, lightness).alpha(alpha / 100)\n      onValueChange(color)\n    }\n  }, [hue, saturation, lightness, alpha, onValueChange])\n\n  // Template\n  return (\n    <ColorPickerContext.Provider\n      value={{\n        hue,\n        saturation,\n        lightness,\n        alpha,\n        format,\n        setHue,\n        setSaturation,\n        setLightness,\n        setAlpha,\n        setFormat\n      }}\n    >\n      <div className={cn('flex w-full flex-col gap-4', className)} {...props} />\n    </ColorPickerContext.Provider>\n  )\n}\n\n// Color picker selection\nexport type ColorPickerSelectionProps = React.HTMLAttributes<HTMLDivElement>\nexport const ColorPickerSelection = React.memo(({ className, ...props }: ColorPickerSelectionProps) => {\n  // Hooks\n  const { hue, setSaturation, setLightness } = useColorPicker()\n\n  // Refs\n  const containerRef = React.useRef<HTMLDivElement>(null)\n\n  // States\n  const [isDragging, setIsDragging] = React.useState(false)\n  const [positionX, setPositionX] = React.useState(0)\n  const [positionY, setPositionY] = React.useState(0)\n\n  // Methods\n  const movePointer = React.useCallback(\n    (event: PointerEvent) => {\n      if (!containerRef.current) {\n        return\n      }\n      const rect = containerRef.current.getBoundingClientRect()\n      const x = Math.max(0, Math.min(1, (event.clientX - rect.left) / rect.width))\n      const y = Math.max(0, Math.min(1, (event.clientY - rect.top) / rect.height))\n      setPositionX(x)\n      setPositionY(y)\n      setSaturation(x * 100)\n      const topLightness = x < 0.01 ? 100 : 50 + 50 * (1 - x)\n      const lightness = topLightness * (1 - y)\n      setLightness(lightness)\n    },\n    [setSaturation, setLightness]\n  )\n\n  // Memos\n  const backgroundGradient = React.useMemo(() => {\n    return `linear-gradient(0deg, rgba(0,0,0,1), rgba(0,0,0,0)),\n            linear-gradient(90deg, rgba(255,255,255,1), rgba(255,255,255,0)),\n            hsl(${hue}, 100%, 50%)`\n  }, [hue])\n\n  // Effects\n  // Register events\n  React.useEffect(() => {\n    const upPointer = () => setIsDragging(false)\n    if (isDragging) {\n      window.addEventListener('pointermove', movePointer)\n      window.addEventListener('pointerup', upPointer)\n    }\n    return () => {\n      window.removeEventListener('pointermove', movePointer)\n      window.removeEventListener('pointerup', upPointer)\n    }\n  }, [isDragging, movePointer])\n\n  // Template\n  return (\n    <div\n      ref={containerRef}\n      className={cn('relative aspect-video cursor-crosshair rounded', className)}\n      style={{\n        background: backgroundGradient\n      }}\n      onPointerDown={(e) => {\n        e.preventDefault()\n        setIsDragging(true)\n        movePointer(e.nativeEvent)\n      }}\n      {...props}\n    >\n      <div\n        className='-translate-x-1/2 -translate-y-1/2 pointer-events-none absolute h-4 w-4 rounded-full border-2 border-white'\n        style={{\n          left: `${positionX * 100}%`,\n          top: `${positionY * 100}%`,\n          boxShadow: '0 0 0 1px rgba(0,0,0,0.5)'\n        }}\n      />\n    </div>\n  )\n})\nColorPickerSelection.displayName = 'ColorPickerSelection'\n\n// Color picker hue\nexport type ColorPickerHueProps = React.ComponentProps<typeof Slider.Root>\nexport const ColorPickerHue = ({ className, ...props }: ColorPickerHueProps) => {\n  // Hooks\n  const { hue, setHue } = useColorPicker()\n\n  // Template\n  return (\n    <Slider.Root\n      className={cn('relative flex h-4 w-full touch-none', className)}\n      max={360}\n      onValueChange={([hue]) => setHue(hue)}\n      step={1}\n      value={[hue]}\n      {...props}\n    >\n      <Slider.Track className='relative my-0.5 h-3 w-full grow rounded-full bg-[linear-gradient(90deg,#FF0000,#FFFF00,#00FF00,#00FFFF,#0000FF,#FF00FF,#FF0000)]'>\n        <Slider.Range className='absolute h-full' />\n      </Slider.Track>\n      <Slider.Thumb className='block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50' />\n    </Slider.Root>\n  )\n}\n\n// Color picker alpha\nexport type ColorPickerAlphaProps = React.ComponentProps<typeof Slider.Root>\nexport const ColorPickerAlpha = ({ className, ...props }: ColorPickerAlphaProps) => {\n  // Hooks\n  const { alpha, setAlpha } = useColorPicker()\n\n  // Template\n  return (\n    <Slider.Root\n      className={cn('relative flex h-4 w-full touch-none', className)}\n      max={100}\n      onValueChange={([alpha]) => setAlpha(alpha)}\n      step={1}\n      value={[alpha]}\n      {...props}\n    >\n      <Slider.Track\n        className='relative my-0.5 h-3 w-full grow rounded-full'\n        style={{\n          background:\n            'url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\") left center'\n        }}\n      >\n        <div className='absolute inset-0 rounded-full bg-linear-to-r from-transparent to-primary/50' />\n        <Slider.Range className='absolute h-full rounded-full bg-transparent' />\n      </Slider.Track>\n      <Slider.Thumb className='block size-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50' />\n    </Slider.Root>\n  )\n}\n\n// Color picker eye dropped\nexport type ColorPickerEyeDropperProps = React.ComponentProps<typeof Button>\nexport const ColorPickerEyeDropper = ({ className, ...props }: ColorPickerEyeDropperProps) => {\n  // Hooks\n  const { setHue, setSaturation, setLightness, setAlpha } = useColorPicker()\n\n  //Methods\n  const dropColor = async () => {\n    try {\n      // @ts-expect-error - EyeDropper API is experimental\n      const eyeDropper = new EyeDropper()\n      const result = await eyeDropper.open()\n      const color = Color(result.sRGBHex)\n      const [h, s, l] = color.hsl().array()\n      setHue(h)\n      setSaturation(s)\n      setLightness(l)\n      setAlpha(100)\n    } catch (error) {\n      console.error('EyeDropper failed:', error)\n    }\n  }\n\n  // Template\n  return (\n    <Button onClick={dropColor} size='icon' variant='outline' {...props}>\n      <PipetteIcon size={16} />\n    </Button>\n  )\n}\n\n// Color picker format\nexport type ColorPickerFormatProps = React.ComponentProps<typeof SelectTrigger>\nexport const ColorPickerFormat = ({ className, ...props }: ColorPickerFormatProps) => {\n  // Hooks\n  const { format, setFormat } = useColorPicker()\n\n  // Template\n  return (\n    <Select value={format} onValueChange={setFormat}>\n      <SelectTrigger {...props}>\n        <SelectValue placeholder='Select format' />\n      </SelectTrigger>\n      <SelectContent>\n        {formats.map((format) => (\n          <SelectItem key={format} value={format}>\n            {format.toUpperCase()}\n          </SelectItem>\n        ))}\n      </SelectContent>\n    </Select>\n  )\n}\n\n// Color picker output\nconst getColorOutput = ({ color, format }: { color: ColorInstance; format: Format }) => {\n  switch (format) {\n    case 'hex':\n      return color.hex()\n    case 'rgb':\n      return `rgb(${color\n        .rgb()\n        .array()\n        .map((value, index) => {\n          if (index === 3) {\n            return value\n          }\n          return `${Math.round(value)}`\n        })\n        .join(', ')})`\n    case 'hsl':\n      return `hsl(${color\n        .hsl()\n        .array()\n        .map((value, index) => {\n          if (index === 0 || index === 3) {\n            return value\n          }\n          return `${Math.round(value)}%`\n        })\n        .join(', ')})`\n  }\n}\n\nexport const ColorPickerOutput = () => {\n  // Hooks\n  const { hue, saturation, lightness, alpha, format } = useColorPicker()\n  const color = Color.hsl(hue, saturation, lightness, alpha / 100)\n\n  // Template\n  return <Input readOnly type='text' value={getColorOutput({ color, format })} />\n}\n",
      "type": "registry:ui",
      "target": "src/components/molecules/color-picker/index.tsx"
    }
  ]
}